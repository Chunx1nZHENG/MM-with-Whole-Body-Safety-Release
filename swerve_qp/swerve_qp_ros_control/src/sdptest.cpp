#include "./SDPsolver/SDPsolver.hpp"
#include "Eigen/Dense"

using namespace Eigen;
int main()
{
    SDPsolver sdp;
    MatrixXd A;
    VectorXd b;
    MatrixXd F;
    VectorXd g;
    VectorXd q;
    VectorXd c;

    //the size of robot is 0.4*0.2*0.3 polytope,totally have 6 facets
    // x <= 0.2 x >= -0.2 y <= 0.1 y >= -0.1 z <= 0.15 z >= -0.15
    A.resize(6, 3);
    b.resize(6);
    A << 1, 0, 0,
            -1, 0, 0,
             0, 1, 0,
             0, -1, 0,
             0, 0, 1,
             0, 0, -1;
    b << 0.2, 0.2, 0.1, 0.1, 0.15, 0.15;
    //A16 BIG MM a17 22
    F.resize(22, 3);
    g.resize(22);
    // F << 0.0132817333390595, -0.0315376667320635, -0.999414314054290,
    //         0.0132590921939605, 0.0663151290446825, -0.997710629458251,
    //         -0.0843905903928274, -0.0314279361735901, -0.995937002566437,
    //         -0.0842477279827449, 0.0660851774482777, -0.994251009379108,
    //         0.779841066636285, -0.625022882201825, -0.0345587544871938,
    //         0.779368330491047, -0.624643996143295, 0.0490396116392924,
    //         0.931711748065732, -0.361615572258353, -0.0338732404201620,
    //         0.931169113926442, -0.361404965324165, 0.0480679967180308,
    //         -0.985737071028607, 0.166402083811352, -0.0251549856525962,
    //         -0.985420339376957, 0.166348616402656, 0.0357056376938524,
    //         -0.911890770776017, 0.409680843911708, -0.0248360283723590,
    //         -0.911605146828659, 0.409552522994834, 0.0352531868639527,
    //         0.695909221826209, 0.717941523931318, -0.0164415082160082,
    //         0.695813670211392, 0.717842947177621, 0.0233417980091287,
    //         0.735966258174391, 0.676818846499054, -0.0164291159980235,
    //         0.735865358779390, 0.676726056087294, 0.0233242097618775,
    //         -0.0110470044853003, 0.00538624954727462, 0.999924473151706,
    //         0.0224575324575038, 0.00538521972956261, 0.999733293756082,
    //         -0.0110427987091023, -0.0281118752291685, 0.999543785468035,
    //         0.0224489857729583, -0.0281065045025203, 0.999352824303016,
    //         -0.0249178577671861, 0.999621384891975, -0.0116699284892369,
    //         -0.0249161339404657, 0.999552230710680, 0.0165687763810287;
    // 
        //    -0.853722528082365	0.518640729421035	0.0465793820297467
        //     -0.849552492643352	0.516107411919552	-0.109058248680097
        //     -0.998153128946308	0.0398044182421465	0.0458905160474307
        //     -0.993419743227841	0.0396156599651093	-0.107460752140761
        //     -0.992137372103102	-0.116545284931792	0.0456139390594469
        //     -0.987488657615702	-0.115999205558376	-0.106819171454212
        //     -0.0264633392960415	0.0188708073847368	-0.999471652575475
        //     0.0479568130778496	0.0188556983821912	-0.998671420797620
        //     -0.0264272393290386	-0.0555119425433997	-0.998108223218557
        //     0.0478914972887625	-0.0554676176740061	-0.997311259275163
        //     0.999694507117895	0.0161950012033659	0.0186712178052711
        //     0.998905057230740	0.0161822121545300	-0.0438955880315692
        //     0.998689556798400	-0.0476576888819247	0.0186524484250602
        //     0.997902483446793	-0.0476201295656559	-0.0438515312260972
        //     0.00400330305608480	-0.0148279036860002	0.999882046461941
        //     0.00400271041532114	0.0227124550209851	0.999734025977035
        //     -0.0335220155867845	-0.0148196888510872	0.999328099921821
        //     -0.0335170585522935	0.0226998757730468	0.999180325279622
        //     -0.00686804697668518	-0.999960473332801	0.00564638847113222
        //     0.0124555622907441	-0.999906485981422	0.00564608362552427
        //     -0.00686755043660285	-0.999888179060872	-0.0132840553045581
        //     0.0124546618865651	-0.999834203417406	-0.0132833382089389
        // F << -0.853722528082365, 0.518640729421035, 0.0465793820297467,
        //     -0.849552492643352, 0.516107411919552, -0.109058248680097,
        //     -0.998153128946308, 0.0398044182421465, 0.0458905160474307,
        //     -0.993419743227841, 0.0396156599651093, -0.107460752140761,
        //     -0.992137372103102, -0.116545284931792, 0.0456139390594469,
        //     -0.987488657615702, -0.115999205558376, -0.106819171454212,
        //     -0.0264633392960415, 0.0188708073847368, -0.999471652575475,
        //     0.0479568130778496, 0.0188556983821912, -0.998671420797620,
        //     -0.0264272393290386, -0.0555119425433997, -0.998108223218557,
        //     0.0478914972887625, -0.0554676176740061, -0.997311259275163,
        //     0.999694507117895, 0.0161950012033659, 0.0186712178052711,
        //     0.998905057230740, 0.0161822121545300, -0.0438955880315692,
        //     0.998689556798400, -0.0476576888819247, 0.0186524484250602,
        //     0.997902483446793, -0.0476201295656559, -0.0438515312260972,
        //     0.00400330305608480, -0.0148279036860002, 0.999882046461941,
        //     0.00400271041532114, 0.0227124550209851, 0.999734025977035,
        //     -0.0335220155867845, -0.0148196888510872, 0.999328099921821,
        //     -0.0335170585522935, 0.0226998757730468, 0.999180325279622,
        //     -0.00686804697668518, -0.999960473332801, 0.00564638847113222,
        //     0.0124555622907441, -0.999906485981422, 0.00564608362552427,
        //     -0.00686755043660285, -0.999888179060872, -0.0132840553045581,
        //     0.0124546618865651, -0.999834203417406, -0.0132833382089389;
        //0.938833326603541	0.343079335233754	-0.0298086328786550
// 0.938553770486047	0.342977176603215	0.0385159218468514
// 0.0285358294025190	-0.999240029560775	-0.0265531497885146
// -0.0335946484372174	-0.999082855233510	-0.0265489731409311
// 0.0285290863113532	-0.999003906526788	0.0343116012225664
// -0.0335867124301493	-0.998846843577799	0.0343062067679128
// -0.311142634505260	0.950060199512761	-0.0239974643430936
// -0.311082578715771	0.949876821829937	0.0310105235332308
// -0.0856465982566418	0.996042352204779	-0.0237548483774800
// -0.0856303994948529	0.995853965822559	0.0306971242599872
// 0.0241115512181984	-0.00428209304023669	-0.999700103419544
// -0.0283873133746678	-0.00428161212725603	-0.999587829176086
// 0.0240837889294327	0.0481641879686479	-0.998549038409293
// -0.0283546352578392	0.0481587911958752	-0.998437151497252
// -0.0159305128573566	0.00619691171246869	0.999853897849746
// 0.0315841207001535	0.00619460614320290	0.999481900873812
// -0.0159172297098874	-0.0412950158732062	0.999020201728871
// 0.0315578048617059	-0.0412796776038713	0.998649134165364
// -0.999945163136935	-0.00196327714107531	-0.0102867031606358
// -0.999909690302777	-0.00196320749425166	0.0132950011259454
// -0.999702809248877	0.0221026741492910	-0.0102842100014124
// -0.999667362199906	0.0221018904418074	0.0132917790825632
F << 0.938833326603541, 0.343079335233754, -0.0298086328786550,
    0.938553770486047, 0.342977176603215, 0.0385159218468514,
    0.0285358294025190, -0.999240029560775, -0.0265531497885146,
    -0.0335946484372174, -0.999082855233510, -0.0265489731409311,
    0.0285290863113532, -0.999003906526788, 0.0343116012225664,
    -0.0335867124301493, -0.998846843577799, 0.0343062067679128,
    -0.311142634505260, 0.950060199512761, -0.0239974643430936,
    -0.311082578715771, 0.949876821829937, 0.0310105235332308,
    -0.0856465982566418, 0.996042352204779, -0.0237548483774800,
    -0.0856303994948529, 0.995853965822559, 0.0306971242599872,
    0.0241115512181984, -0.00428209304023669, -0.999700103419544,
    -0.0283873133746678, -0.00428161212725603, -0.999587829176086,
    0.0240837889294327, 0.0481641879686479, -0.998549038409293,
    -0.0283546352578392, 0.0481587911958752, -0.998437151497252,
    -0.0159305128573566, 0.00619691171246869, 0.999853897849746,
    0.0315841207001535, 0.00619460614320290, 0.999481900873812,
    -0.0159172297098874, -0.0412950158732062, 0.999020201728871,
    0.0315578048617059, -0.0412796776038713, 0.998649134165364,
    -0.999945163136935, -0.00196327714107531, -0.0102867031606358,
    -0.999909690302777, -0.00196320749425166, 0.0132950011259454,
    -0.999702809248877, 0.0221026741492910, -0.0102842100014124,
    -0.999667362199906, 0.0221018904418074, 0.0132917790825632;

    // g << -0.0785918210707094,
    //     0.391925841906459,
    //     -0.603565859213129,
    //     -0.133791494053570,
    //     1.79465957965803,
    //     1.83673331052856,
    //     3.89165602059820,
    //     3.93169598816732,
    //     -3.75325637687870,
    //     -3.72062449813108,
    //     -2.17703256012728,
    //     -2.14532298280157,
    //     8.42743584528289,
    //     8.44682273144056,
    //     8.44827696829361,
    //     8.46764726035865,
    //     1.96604909354542,
    //     2.14770925510269,
    //     1.80592502318716,
    //     1.98754678462694,
    //     6.37661655859584,
    //     6.39075823824729;
        // g << -1.86651250617412,
        //     -1.95820928224817,
        //     -4.06040444956937,
        //     -4.14048651342596,
        //     -4.53473363057444,
        //     -4.61222989199361,
        //     -0.0588014261485437,
        //     0.280435499879633,
        //     -0.296306116696516,
        //     0.0426583558223220,
        //     5.38712420793383,
        //     5.34229281241280,
        //     5.17773918393431,
        //     5.13312207095129,
        //     1.97052985455452,
        //     2.09149581678759,
        //     1.80038418490837,
        //     1.92130847200411,
        //     -0.670363147598707,
        //     -0.582231020614725,
        //     -0.682594508303361,
        //     -0.594468094678160;
        g << 2.59214989298734,
            2.65657382230225,
            -0.724276767512744,
            -0.815034609857789,
            -0.666026467750195,
            -0.756772055519596,
            1.87396850829771,
            1.92609822699922,
            2.28497560271918,
            2.33650437029879,
            0.0293252730402071,
            -0.0474642181172259,
            0.112418933397500,
            0.0357085318128636,
            1.98621376647620,
            2.05594161301729,
            1.91301790945007,
            1.98271546153535,
            0.589070458115301,
            0.611553972131212,
            0.627075083879162,
            0.649551806526753;
    c.resize(6);
    // c << 5.4255 , 5.1042 , 0.9108, 0 , 0 , 0;
    // c << 4.72753266661626,2.48770534030010,0.987842612306776,0,0,0;
    c << 0.939953718792313,1.55761055617373,1.05922277311792,0,0,0;
    q.resize(6);
    q << 0,0,0, 0, 0, 0;

    //show A,b,F,g,q,c
    std::cout << "A: " << A << std::endl;
    std::cout << "b: " << b.transpose() << std::endl;
    std::cout << "F: " << F << std::endl;
    std::cout << "g: " << g.transpose() << std::endl;
    std::cout << "q: " << q.transpose() << std::endl;
    std::cout << "c: " << c.transpose() << std::endl;
    VectorXd result(6);
    result = sdp.solveSDP("envname", A, b, F, g, q, c);
    std::cout << "result: " << result.transpose() << std::endl;
}